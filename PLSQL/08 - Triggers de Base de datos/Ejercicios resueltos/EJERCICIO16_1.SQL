CREATE OR REPLACE PROCEDURE VERIFICAR_ESTATUS (P_OBJETO VARCHAR2) IS 
	AUX VARCHAR2(20):= '';
	AUX_TIPO VARCHAR2(30);
	V_SENTENCIA VARCHAR2(200);
	V_SENTENCIA2 VARCHAR2(200);
BEGIN
	
	V_SENTENCIA := 'SELECT STATUS, OBJECT_TYPE
	FROM ALL_OBJECTS
	WHERE OBJECT_NAME = :VAR AND STATUS = :VAR2';
	EXECUTE IMMEDIATE V_SENTENCIA INTO AUX, AUX_TIPO USING P_OBJETO, 'INVALID';
	
	IF AUX='INVALID' THEN
		DBMS_OUTPUT.PUT_LINE('OBJETO INVALID, EN PROCESO DE COMPILACION ...');
		V_SENTENCIA2 := 'ALTER ' || AUX_TIPO || ' ' || P_OBJETO || ' COMPILE';
		EXECUTE IMMEDIATE V_SENTENCIA2;
		EXECUTE IMMEDIATE V_SENTENCIA INTO AUX, AUX_TIPO USING P_OBJETO, 'INVALID';
		IF AUX='INVALID' THEN
			DBMS_OUTPUT.PUT_LINE('ERROR COMPILACION');
		ELSE
			DBMS_OUTPUT.PUT_LINE('COMPILACION EXITOSA');
		END IF;
	ELSE
		DBMS_OUTPUT.PUT_LINE('COMPILACION EXITOSA');
	END IF;
END;
/

	