CREATE OR REPLACE FUNCTION F_CALCULAR_SALDO (COD_CUENTA IN NUMBER) RETURN NUMBER IS
		 V_A_DEBITO NUMBER(15);
		 V_A_CREDITO NUMBER (15);
		 V_SALDO_CUENTA NUMBER(15);
	BEGIN
		SELECT 
			SUM(ACUM_DEBITO),
			SUM(ACUM_CREDITO)
		INTO
			V_A_DEBITO,
			V_A_CREDITO
		FROM B_MAYOR
		WHERE CODIGO_CTA = COD_CUENTA;
		V_SALDO_CUENTA := V_A_DEBITO - V_A_CREDITO;
		RETURN V_SALDO_CUENTA;
	EXCEPTION
		WHEN NO_DATA_FOUND THEN
			-- Manejo de excepción cuando no se encuentra ningún dato
			DBMS_OUTPUT.PUT_LINE('No se encontró información para la cuenta. ');
			RETURN 0; -- O el valor que desees en este caso
		WHEN OTHERS THEN
			-- Manejo de otras excepciones
			DBMS_OUTPUT.PUT_LINE('Error: ' || SQLCODE || ' - ' || SQLERRM);
			RETURN 0;
	
	END;
	--SHOW ERRORS FUNCTION F_CALCULAR_SALDO; ---> PARA VER ERRORES
	
	--PARA PROBAR QUE FUNCIONA
	--SELECT NOMBRE_CTA,
	--	TO_CHAR(F_CALCULAR_SALDO(CODIGO_CTA),'999G999G999G999') SALDO_CUENTA
	--FROM B_CUENTAS