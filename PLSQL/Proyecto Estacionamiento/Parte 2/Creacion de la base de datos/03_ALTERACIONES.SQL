ALTER TABLE M_MOVIMIENTOS
ADD 
(TIPO_PAGO VARCHAR2(2) DEFAULT 'CO' NOT NULL
 CONSTRAINT CHK_TIPPAGO CHECK (TIPO_PAGO IN ('CR', 'CO')),
 PLAZO NUMBER(3) DEFAULT 0 NOT NULL 
 CONSTRAINT CHK_PLAZOM CHECK (PLAZO IN (0,6,12,24)),
 CONSTRAINT CHK_PLAZ_TIP CHECK ((TIPO_PAGO = 'CO' AND PLAZO = 0) OR 
   (TIPO_PAGO = 'CR' AND PLAZO <> 0)),
 TASA_INTERES NUMBER(12) DEFAULT 0 NOT NULL,
 CONSTRAINT CHK_TASAINT CHECK( (TASA_INTERES = 0 AND TIPO_PAGO = 'CO') OR                        
 (TASA_INTERES > 0 AND TIPO_PAGO = 'CR')),
 MONTO_TOTAL NUMBER(12) DEFAULT 0 NOT NULL CONSTRAINT CHK_MONTOTOT CHECK (MONTO_TOTAL >= 0));
---
CREATE TABLE M_CUOTAS
(ID_MOVIMIENTO NUMBER(12) NOT NULL,
 NRO_CUOTA NUMBER(2) NOT NULL,
 MONTO_CUOTA NUMBER(12) NOT NULL CONSTRAINT CHK_MONCUOTA CHECK (MONTO_CUOTA > 0),
 FECHA_VENCIMIENTO DATE NOT NULL,
 FECHA_PAGO DATE,
 FORMA_PAGO VARCHAR2(2) CONSTRAINT CHK_FORMAPAG CHECK (FORMA_PAGO IN ('CH','TD','TC','CO')),
 NRO_COMPROBANTE VARCHAR2(20),
 CONSTRAINT FK_MOVIM_CUOTAS FOREIGN KEY (ID_MOVIMIENTO) REFERENCES M_MOVIMIENTOS(ID_MOVIMIENTO),
 CONSTRAINT PK_CUOTAS PRIMARY KEY (ID_MOVIMIENTO, NRO_CUOTA));