ACCEPT I_NOMB_TABLESPACE  PROMPT 'Ingrese nombre del Tablespace: ';
DECLARE
	CURSOR C_TABLE_SPACE (NOMB_TABLESPACE ALL_TABLES.TABLESPACE_NAME%TYPE) IS
		SELECT TABLE_NAME
		FROM ALL_TABLES
		WHERE TABLESPACE_NAME = NOMB_TABLESPACE;
	INGRESO_TABLESPACE ALL_TABLES.TABLESPACE_NAME%TYPE := '&I_NOMB_TABLESPACE';
	R_TABLESPACE C_TABLE_SPACE%ROWTYPE;
	V_ERROR_CODE NUMBER;
    V_ERROR_MESSAGE VARCHAR2(255);
BEGIN
	OPEN C_TABLE_SPACE (INGRESO_TABLESPACE);
		FETCH C_TABLE_SPACE INTO R_TABLESPACE;
		IF C_TABLE_SPACE%FOUND THEN
			DBMS_OUTPUT.PUT_LINE('TABLA DEPENDIENTES DEL TABLESPACE: '|| INGRESO_TABLESPACE);
			WHILE C_TABLE_SPACE%FOUND LOOP
				DBMS_OUTPUT.PUT_LINE('	TABLA: '|| R_TABLESPACE.TABLE_NAME);
				FETCH C_TABLE_SPACE INTO R_TABLESPACE;
			END LOOP;
		ELSE
			DBMS_OUTPUT.PUT_LINE('El tablespace no existe.');
		END IF;
	CLOSE C_TABLE_SPACE;
EXCEPTION
	WHEN OTHERS THEN
        V_ERROR_CODE := SQLCODE;
        V_ERROR_MESSAGE := SQLERRM;
        DBMS_OUTPUT.PUT_LINE (TO_CHAR(V_ERROR_CODE)||': '|| V_ERROR_MESSAGE);
END;
/